<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./index.css" />
    <title>Ecommerce</title>
  </head>
  <body>
    <!-- header -->
    <header>
      <div class="container-fluid p-2">
        <div class="row align-items-center">
          <div class="col-md-6">
            <a href="#" class="logo custom-logo-style">Ecommerce</a>
          </div>
          <div class="col-md-6 text-end">
            <i
              class="bx bx-shopping-bag text-light p-1 bg-black p-lg-2"
              id="cart-icon"
            ></i>
          </div>
        </div>
      </div>
    </header>

    <!-- Sidebar -->
    <div class="sidebar" id="cart-sidebar">
      <div class="cart-header d-flex justify-content-between">
        <h5 class="text-danger" style="margin-left: 35%">Your Cart</h5>
        <button class="btn-close" id="close-sidebar"></button>
      </div>

      <div class="cart-items container">
        <div class="cart-content">
        
          </div>

          <div><hr style="border: 1px solid black" /></div>
          <!-- total -->
          <div class="d-flex justify-content-end mt-4">
            <div class="total-title fs-5">Total:</div>
            <div class="total-price fs-5">$0</div>
          </div>
          <!-- buy btn -->
          <button
            type="button"
            class="btn btn-buy btn-danger d-block mx-auto mt-3 px-4 py-2 fs-5 font-weight-bold"
          >
            Buy Now
          </button>
          <!-- cart close -->
        </div>
      </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="cart-overlay"></div>

    <!-- items shop -->
    <section class="container py-5">
      <h2 class="text-center">Shop Products</h2>
      <!-- cards -->
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 py-5 ms-5">
        <!-- Box1 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img1.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">LG Monitor</h5>
              <div class="d-flex justify-content-between">
                <div>$30</div>
                <div>
                  <i
                    class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                  ></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Box2 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img2.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Lenova Monitor</h5>

              <div class="d-flex justify-content-between">
                <div>$30</div>
                <div>
                  <i
                    class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                  ></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Box3 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img3.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">MSI Monitor</h5>

              <div class="d-flex justify-content-between">
                <div>$30</div>
                <div>
                  <i
                    class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                  ></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Box4 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img4.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Zebronics Mouse</h5>

              <div class="d-flex justify-content-between">
                <div>$30</div>
                <div>
                  <i
                    class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                  ></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Box5 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img5.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Dell Mouse</h5>

              <div class="d-flex justify-content-between">
                <div>$30</div>
                <div>
                  <i
                    class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                  ></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Box6 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img6.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">MSI Mouse</h5>
              <div class="d-flex justify-content-between">
                <span>$30</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Box7 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img7.jpg"
              class="card-img-top img-fluid mx-auto d-block mb-5"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Ryzen Keyboard</h5>
              <div class="d-flex justify-content-between">
                <span>$70</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Box8 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img8.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">hp Keyboard</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

                <!-- Box9 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img9.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Hp Cpu</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Box10 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img10.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">ASUS Cpu</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

                <!-- Box11 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img11.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Acer Cpu</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

                <!-- Box12 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img12.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Boat Headset</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

            <!-- Box13 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img13.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">Samsung Headset</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

    <!-- Box14 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img14.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">1tb SSD Samsung</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

            <!-- Box15 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img15.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">2Tb SSD ACER</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

    <!-- Box16 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img16.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">lenova SSD 512gb </h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Box17 -->
        <div class="col mb-3 col-md-5 col-sm-6 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img17.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">5Tb SSD</h5>
              <div class="d-flex justify-content-between">
                <span>$20</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>

        <div class="col mb-3 col-md-5 col-lg-4">
          <div class="card w-75">
            <img
              src="./images/img18.jpg"
              class="card-img-top img-fluid mx-auto d-block"
              alt=""
            />
            <div class="card-body d-flex justify-content-end flex-column">
              <h5 class="card-title">MSI 3Tb SSD</h5>
              <div class="d-flex justify-content-between">
                <span>$80</span>
                <i
                  class="bx bx-shopping-bag add-cart text-light p-2 bg-black"
                ></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const cartSidebar = document.getElementById("cart-sidebar");
  const cartOverlay = document.getElementById("cart-overlay");
  const cartIcon = document.getElementById("cart-icon");
  const closeSidebar = document.getElementById("close-sidebar");

  cartIcon.addEventListener("click", function () {
    cartSidebar.classList.add("show-cart");
    cartOverlay.style.display = "block";
    toggleCartContentOverflow(true); // Show the scrollbar when the cart is shown
  });

  closeSidebar.addEventListener("click", function () {
    cartSidebar.classList.remove("show-cart");
    cartOverlay.style.display = "none";
    toggleCartContentOverflow(false); // Hide the scrollbar when the cart is hidden
  });
});

function toggleCartContentOverflow(show) {
  const cartContent = document.querySelector(".cart-content");
  cartContent.style.overflowY = show ? "auto" : "hidden";
}


  if (document.readyState == "loading") {
    document.addEventListener("DOMContentLoaded", ready);
  } else {
    ready();
  }

  function ready() {
    var removeCartButtons = document.getElementsByClassName("cart-remove");
    console.log(removeCartButtons);
    for (var i = 0; i < removeCartButtons.length; i++) {
      var button = removeCartButtons[i];
      button.addEventListener("click", removeCartItem);
    }

    //quantity changes
    var quantityInputs = document.getElementsByClassName("cart-quantity");
    for (var i = 0; i < quantityInputs.length; i++) {
      var input = quantityInputs[i];
      input.addEventListener("change", quantityChanged);
    }
    // Add To Cart
    var addCart = document.getElementsByClassName("add-cart");
    for (var i = 0; i < addCart.length; i++) {
      var button = addCart[i];
      button.addEventListener("click", addCartClicked);
    }
    //buy Button work 
    document.getElementsByClassName("btn-buy")[0]
    .addEventListener("click",buyButtonClicked);
  }

 
 // Buy Button
function buyButtonClicked() {
  alert('Your Order is placed');
  var cartContent = document.getElementsByClassName('cart-content')[0]; // Corrected the class name
  while (cartContent.hasChildNodes()) {
    cartContent.removeChild(cartContent.firstChild);
  }
}

  // remove item from cart
  function removeCartItem(event) {
    var buttonClicked = event.target;
    buttonClicked.parentElement.remove();
    updatetotal();
  }

  //quantity changes
  function quantityChanged(event) {
    var input = event.target;
    if (isNaN(input.value) || input.value <= 0) {
      input.value = 1;
    }
    updatetotal();
  }

  // Add To Cart
function addCartClicked(event) {
  event.preventDefault(); // Add this line to prevent the default behavior

  var button = event.target;
  var shopProduct = button.closest(".card");
  var titleElement = shopProduct.querySelector(".card-title");
  var priceElement = shopProduct.querySelector(
    ".card-body .d-flex div:first-child"
  );
  var productImg = shopProduct.querySelector(".card-img-top");

  if (titleElement && priceElement && productImg) {
    var title = titleElement.innerHTML;
    var price = priceElement.innerText;
    var imgSrc = productImg.src;
    addProductToCart(title, price, imgSrc);
    updatetotal();
  }
}
 
function addProductToCart(title, price, imgSrc) {
  var cartShopBox =document.createElement("div")
  var cartItems = document.getElementsByClassName("cart-content")[0];
  var cartItemsNames=cartItems.getElementsByClassName("cart-product-title");

  for(var i=0;i<cartItemsNames.length;i++){
    alert("you have already add this item to cart")
  }


  var cartBoxContent = `
   <img
      src="${imgSrc}"
      alt=""
      class="cart-img col-4 col-md-3 col-lg-2"
      style="
        width: 100px;
        height: 100px;
        object-fit: contain;
        padding: 10px;
      "
    />
    <div class="detail-box col-7 col-md-6 col-lg-5 ms-2 ">
      <div class="cart-product-title text-uppercase fs-6 ">${title}</div>
      <div class="cart-price font-weight-bold ">${price}</div>
      <input
        type="number"
        value="1"
        class="cart-quantity form-control mt-2"
        style="
          border: 1px solid white;
          outline-color: rgb(255, 0, 0);
          text-align: center;
          font-size: 1rem;
          width: 60px;
        "
      />
      <!-- remove cart -->
    
  
    </div>
      <i
      class="bx bxs-trash-alt col-1 col-md-2 col-lg-1 text-danger fs-3 cart-remove"
      style="cursor: pointer"
    ></i>
  `;

  var cartShopBox = document.createElement("div");
  cartShopBox.classList.add("cart-box");
  cartShopBox.innerHTML = cartBoxContent;

  cartItems.append(cartShopBox);
  cartShopBox
    .getElementsByClassName("cart-remove")[0]
    .addEventListener("click", removeCartItem);
  cartShopBox
    .getElementsByClassName("cart-quantity")[0]
    .addEventListener("change", quantityChanged);

  updatetotal();
}


// function addProductToCart(title, price, imgSrc) {
//   var cartItems = document.getElementsByClassName("cart-content")[0];
//   var cartItemsNames = cartItems.getElementsByClassName("cart-product-title");
//   var existingCartItem = null;

//   for (var i = 0; i < cartItemsNames.length; i++) {
//     if (cartItemsNames[i].innerText === title) {
//       existingCartItem = cartItemsNames[i].closest(".cart-box");
//       break;
//     }
//   }

//   if (existingCartItem) {
//     var quantityElement = existingCartItem.getElementsByClassName("cart-quantity")[0];
//     var currentQuantity = parseInt(quantityElement.value);
//     quantityElement.value = currentQuantity + 1;
//   } else {
//     var cartBoxContent = `
//        <img
//       src="${imgSrc}"
//       alt=""
//       class="cart-img col-4 col-md-3 col-lg-2"
//       style="
//         width: 100px;
//         height: 100px;
//         object-fit: contain;
//         padding: 10px;
//       "
//     />
//     <div class="detail-box col-7 col-md-6 col-lg-5 ms-2 ">
//       <div class="cart-product-title text-uppercase fs-6 ">${title}</div>
//       <div class="cart-price font-weight-bold ">${price}</div>
//       <input
//         type="number"
//         value="1"
//         class="cart-quantity form-control mt-2"
//         style="
//           border: 1px solid white;
//           outline-color: rgb(255, 0, 0);
//           text-align: center;
//           font-size: 1rem;
//           width: 60px;
//         "
//       />
//       <!-- remove cart -->
    
  
//     </div>
//       <i
//       class="bx bxs-trash-alt col-1 col-md-2 col-lg-1 text-danger fs-3 cart-remove"
//       style="cursor: pointer"
//     ></i>
      
//     `;

//     var cartShopBox = document.createElement("div");
//     cartShopBox.classList.add("cart-box");
//     cartShopBox.innerHTML = cartBoxContent;

//     cartItems.append(cartShopBox);
//     cartShopBox
//       .getElementsByClassName("cart-remove")[0]
//       .addEventListener("click", removeCartItem);
//     cartShopBox
//       .getElementsByClassName("cart-quantity")[0]
//       .addEventListener("change", quantityChanged);
//   }

//   updatetotal();
// }




  
//update Total
function updatetotal() {
  var cartContent = document.getElementsByClassName("cart-content")[0];
  var cartBoxes = cartContent.getElementsByClassName("cart-box");
  var total = 0;
  for (var i = 0; i < cartBoxes.length; i++) {
    var cartBox = cartBoxes[i];
    var priceElement = cartBox.getElementsByClassName("cart-price")[0];
    var quantityElement = cartBox.getElementsByClassName("cart-quantity")[0];
    var price = parseFloat(priceElement.innerHTML.replace("$", ""));
    var quantity = quantityElement.value;
    total = total + price * quantity;

    //if price contains some cents value
    total = Math.round(total * 100) / 100;
  }

  document.getElementsByClassName("total-price")[0].innerHTML = "$" + total;
}

</script>
